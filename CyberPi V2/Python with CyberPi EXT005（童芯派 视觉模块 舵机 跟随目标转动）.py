""""
名称：EXT 005 童芯派 视觉模块 舵机 跟随目标转动
硬件： 童芯派 
功能介绍：
将视觉模块安装在两个舵机之上，实现两个自由度的转动。
舵机会根据识别到色块进行转动直到色块显示在视觉模块识别的中间区域。



难度：⭐⭐⭐⭐⭐
支持的模式：上传模式
无

"""
# ---------程序分割线----------------程序分割线----------------程序分割线----------
import cyberpi
import mbuild



x = 0
y = 0

rec_pic = [0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x4a90e2,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000]
rec = cyberpi.sprite()
rec.draw_pixel(rec_pic)
cyberpi.pocket.servo_set(90,"all")
mbuild.smart_camera.set_mode("color", 1)
while True:
    if mbuild.smart_camera.detect_sign(1, 1):
        x = mbuild.smart_camera.get_sign_x(1, 1) / 2.5
        y = mbuild.smart_camera.get_sign_y(1, 1) / 1.875
        rec.move_to(x, y)
        cyberpi.screen.render()
        if mbuild.smart_camera.get_sign_x(1, 1) >200:
            cyberpi.pocket.servo_add(-10,"S1")
        elif mbuild.smart_camera.get_sign_x(1, 1) < 120:
            cyberpi.pocket.servo_add(10,"S1")
        elif mbuild.smart_camera.get_sign_y(1, 1) >160:
            cyberpi.pocket.servo_add(10,"S2")
        elif mbuild.smart_camera.get_sign_y(1, 1) <80:
            cyberpi.pocket.servo_add(-10,"S2")
        if cyberpi.pocket.servo_get('s1') < 10:
            cyberpi.pocket.servo_set(10,"s1")
        elif cyberpi.pocket.servo_get('s2') < 10:
            cyberpi.pocket.servo_set(10,"s2")
        elif cyberpi.pocket.servo_get('s1') > 170:
            cyberpi.pocket.servo_set(170,"s1")
        elif cyberpi.pocket.servo_get('s2') > 170:
            cyberpi.pocket.servo_set(170,"s1")
    else:
        cyberpi.pocket.servo_set(90,"all")
